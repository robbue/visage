(this["webpackJsonpclose-your-eyes"]=this["webpackJsonpclose-your-eyes"]||[]).push([[0],{14:function(t,e){t.exports={VERSION:"0.1.0",SITE_NAME:"Close your eyes",SITE_DESCRIPTION:"",PRODUCTION_DOMAIN:"https://closeyoureyes.no",PRODUCTION_NAKED_DOMAIN:"closeyoureyes.no",LOCALE:"nb",GA_TRACKING_ID:"",ARTIST_NAME:"Artist",SONG_TITLE:"Song Title",AUDIO_FILE:"firestone.mp3",FACEBOOK_URL:"//www.facebook.com/closeyoureyes/",INSTAGRAM_URL:"//www.instagram.com/closeyoureyes/",SPOTIFY_URL:"//www.instagram.com/closeyoureyes/",paths:{index:{name:"Close your eyes",url:"/",employees:!0,menu:!0,estatePicker:!0}}}},26:function(t,e,n){t.exports=n.p+"static/media/img1.43f88bca.jpg"},27:function(t,e,n){t.exports=n.p+"static/media/img2.0ee01d22.jpg"},29:function(t,e,n){t.exports=n(60)},60:function(t,e,n){"use strict";n.r(e);var i=n(0),a=n.n(i),r=n(20),s=n.n(r),o=n(1),c=n(2);function u(){var t=Object(o.a)(["\n font-size: large;\n"]);return u=function(){return t},t}function l(){var t=Object(o.a)(["\n animation: App-logo-spin infinite 20s linear;\n height: 80px;\n @keyframes App-logo-spin {\n   from { transform: rotate(0deg); }\n   to { transform: rotate(360deg); }\n }\n"]);return l=function(){return t},t}function h(){var t=Object(o.a)(["\n   font-size: 1.5em;\n"]);return h=function(){return t},t}function d(){var t=Object(o.a)(["\n background-color: #222;\n height: 150px;\n padding: 20px;\n color: white;\n"]);return d=function(){return t},t}function f(){var t=Object(o.a)(["\n text-align: center;\n"]);return f=function(){return t},t}var p=c.c.div(f()),m=(c.c.header(d()),c.c.h1(h()),c.c.img(l()),c.c.p(u()),n(16)),v=n.n(m),g=n(8),b=n(10),y=n(12),x=n(11),w=n(6),k=n(13),O=n(4),_=n(15),j=n(3),E={body:"'Roboto', sans-serif",header:"'Merriweather', serif"},C={xsmall:"14px",small:"14px",medium:"15px",large:"16px",xlarge:"17px",xxlarge:"18px",lowheight:"14px"},P={h1:"50px",h2:"44px",h3:"26px",h4:"22px",h5:"20px",h6:"18px"},S={h1:"50px",h2:"54px",h3:"38px",h4:"30px",h5:"26px",h6:"22px",h7:"20px",h8:"18px"},R={light:300,normal:400,medium:500,bold:700,extrabold:800},T={primary:"#bd9b60",secondary:"#00292e",tertiary:"#00292e",accent:"#a76e5e",fadedPrimary:"#204038",fadedSecondary:"#214549",fadedX2Secondary:"#4D6A6D",header:"#000000",text:"#000000",success:"green",warning:"yellow",error:"red",dark:"#000000",medium:"#656565",grey:"#bbbcbc",light:"#d9d9d6",white:"#ffffff",facebook:"#3b5998",messenger:"#0084ff",twitter:"#1da1f2",youtube:"#bb0000",darkLogo:"#002a31",darkLink:"#003338",darkHover:"#002a31"},$={xsmall:300,small:360,medium:768,large:1024,xlarge:1441,xxlarge:1921,lowheight:760};function A(){var t=Object(o.a)(["\n\t  @media (max-height: ","em) and (min-width: 1024px) {\n\t    ","\n\t  }\n\t"]);return A=function(){return t},t}function M(){var t=Object(o.a)(["\n\t  @media (min-width: ","em) {\n\t    ","\n\t  }\n\t"]);return M=function(){return t},t}var I=Object.keys($).reduce((function(t,e){var n=Math.round($[e]/16);return t[e]=function(){return Object(c.b)(M(),n,c.b.apply(void 0,arguments))},t}),{});Object.keys($).reduce((function(t,e){var n=Math.round($[e]/16);return t[e]=function(){return Object(c.b)(A(),n,c.b.apply(void 0,arguments))},t}),{}),Object.keys($).reduce((function(t,e){var n=Math.round($[e]/16);return"undefined"!==typeof window&&(t[e]=window.matchMedia("(min-width: ".concat(n,"em")).matches),t}),{});function L(){var t=Object(o.a)(["\n\t","\n"]);return L=function(){return t},t}function z(){var t=Object(o.a)(["\n\tfont-size: ",";\n\tcolor: ",";\n\tline-height: 1.4;\n\tfont-family: ",";\n\ttext-align: ",";\n\n\tmargin: 0 0 "," 0;\n"]);return z=function(){return t},t}var H=c.c.p(L(),(function(t){return Object(c.b)(z(),(function(t){return t.fontSize?Object(j.d)("".concat(t.fontSize,"px")):Object(j.d)(C.medium)}),(function(t){return t.color?t.color:T.text}),E.body,(function(t){return t.textAlign?t.textAlign:"inherit"}),Object(j.a)("15px"))}));function D(){var t=Object(o.a)(["\n\t","\n\tcolor: ",";\n\ttext-align: ",";\n\ta {\n\t\ttext-decoration: none;\n\t\tcolor: currentColor;\n\t}\n"]);return D=function(){return t},t}function F(){var t=Object(o.a)(["\n\t\tfont-size: ",";\n\t"]);return F=function(){return t},t}function N(){var t=Object(o.a)(["\n\tposition: relative;\n\n\tfont-family: ",";\n\tfont-weight: ",";\n\tfont-style: normal;\n\tfont-size: ",";\n\tline-height: 0.95;\n\n\tdisplay: inline-block;\n\tmargin: 0 0  "," 0;\n\tpadding: 0;\n\n\t","\n\n\t a {\n\t   text-decoration: none;\n\t \t color: ",";\n\t }\n"]);return N=function(){return t},t}var U=c.c.h2(D(),(function(t){return Object(c.b)(N(),E.header,R.bold,(function(t){return Object(j.d)(P[t.rank])}),(function(t){return t.mb?Object(j.d)("".concat(t.mb,"px")):Object(j.d)("20px")}),I.large(F(),(function(t){return Object(j.d)(S[t.rank])})),T.primary)}),(function(t){return t.color?t.color:T.text}),(function(t){return t.textAlign?t.textAlign:"inherit"})),W=function(t){var e=t.color,n=t.rank,r=void 0===n?2:n,s=t.asRank,o=t.children,c=t.className,u=t.underLine,l=t.textAlign,h=t.asTag,d=(t.onClick,r>6?"h6":"h".concat(r)),f=d;return h&&(d=h),s&&(f="h".concat(s)),a.a.createElement(U,{textAlign:l,color:e,rank:f,as:d,className:c,underLine:u},i.Children.toArray(o))},G=n(24),V=n.n(G);n(58);function B(){var t=Object(o.a)(["\n\twidth: 100%;\n\tfont-size: ",";\n\tcolor: ",";\n\tmargin: 0;\n\tpadding: 0;\n"]);return B=function(){return t},t}function Y(){var t=Object(o.a)(["\n\tmargin-right: ",";\n"]);return Y=function(){return t},t}function K(){var t=Object(o.a)(["\n\tfont-size: ",";\n\n\tdisplay: inline-flex;\n\n\talign-items: center;\n\ttext-align: left;\n"]);return K=function(){return t},t}var q=c.c.div(K(),Object(j.d)("16px")),X=Object(c.c)(V.a)(Y(),Object(j.a)("20px")),J=Object(c.c)(H)(B(),Object(j.d)("12px"),T.medium),Q=a.a.forwardRef((function(t,e){return a.a.createElement(q,{ref:e},a.a.createElement(X,{type:"Triangle",color:T.primary,height:60,width:60}),t.children&&a.a.createElement(J,null,t.children))}));function Z(){return(Z=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function tt(t,e){if(null==t)return{};var n,i,a=function(t,e){if(null==t)return{};var n,i,a={},r=Object.keys(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}var et=a.a.createElement("path",{d:"M257,15.4c-109,0-197.3,88.4-197.3,197.3S148,410.1,257,410.1s197.3-88.4,197.3-197.3S366,15.4,257,15.4z M257,300   c-48.2,0-87.3-39.1-87.3-87.3s39.1-87.3,87.3-87.3s87.3,39.1,87.3,87.3S305.2,300,257,300z"}),nt=a.a.createElement("path",{d:"M381.5,391.6C345.9,416.4,302.6,431,256,431s-89.9-14.6-125.5-39.4L6,462.4v34.2h500v-34.2L381.5,391.6z"}),it=a.a.createElement("circle",{cx:257,cy:212.8,r:39.3}),at=function(t){var e=t.svgRef,n=t.title,i=tt(t,["svgRef","title"]);return a.a.createElement("svg",Z({viewBox:"0 0 512 512",ref:e},i),n?a.a.createElement("title",null,n):null,et,nt,it)},rt=a.a.forwardRef((function(t,e){return a.a.createElement(at,Z({svgRef:e},t))})),st=(n.p,n(14)),ot=n.n(st);function ct(){var t=Object(o.a)(["\n\tfont-family: ",";\n\tfont-size: ",";\n\tcolor: ",";\n\tline-height: 1.8;\n\n\tpadding: 0 ",";\n\tmargin: 0;\n\tdisplay: none;\n"]);return ct=function(){return t},t}function ut(){var t=Object(o.a)(["\n\n"]);return ut=function(){return t},t}O.a.registerPlugin(_.a);var lt=c.c.div(ut()),ht=c.c.p(ct(),E.header,Object(j.d)(C.large),T.text,Object(j.d)("25px")),dt=function(t){function e(t){var n;return Object(g.a)(this,e),(n=Object(y.a)(this,Object(x.a)(e).call(this,t))).state={sdkLoaded:!1},n.$text1=a.a.createRef(),n.$text2=a.a.createRef(),n.$text3=a.a.createRef(),n.$text4=a.a.createRef(),n.$text5=a.a.createRef(),n}return Object(k.a)(e,t),Object(b.a)(e,[{key:"componentDidMount",value:function(){this._tl([this.$text1.current,this.$text2.current,this.$text3.current,this.$text4.current,this.$text5.current])}},{key:"componentDidUpdate",value:function(t){t.sdkLoaded!==this.props.sdkLoaded&&!0===this.props.sdkLoaded&&this.introTimeline.play()}},{key:"_tl",value:function(t){this.introTimeline=O.a.timeline({paused:!0,onComplete:this.props.onComplete});for(var e=0;e<t.length;e++){var n=t[e],i=new _.a(n,{type:"words",wordsClass:"word word++"}),a=O.a.timeline().set(n,{display:"block"}).from(i.words,{duration:2,opacity:0,y:3,ease:"power2",stagger:.1},"words").to(i.words,{duration:.2,opacity:0,ease:"power2",stagger:.1}).set(n,{display:"none"});this.introTimeline.add(a)}}},{key:"render",value:function(){return a.a.createElement(lt,null,a.a.createElement(ht,{ref:this.$text1},"In a world where ",a.a.createElement("strong",null,"our attention span constantly get shorter"),", and the fight for it gets bigger."),a.a.createElement(ht,{ref:this.$text2},"We don\u2019t take the time to ",a.a.createElement("strong",null,"listen to music")," as we used to."),a.a.createElement(ht,{ref:this.$text3},"So ",a.a.createElement("strong",null,ot.a.ARTIST_NAME)," would like you to get the full experience of the new song ",a.a.createElement("strong",null,ot.a.SONG_TITLE),"."),a.a.createElement(ht,{ref:this.$text4},"But there is ",a.a.createElement("strong",null,"one catch"),"..."),a.a.createElement(ht,{ref:this.$text5},"You need to ",a.a.createElement("strong",null,"close your eyes")," to listen."))}}]),e}(i.PureComponent),ft=n(7),pt=function(){function t(e){Object(g.a)(this,t),this._loaded=this._loaded.bind(this),this._play=this._play.bind(this),this._pause=this._pause.bind(this),this._fadeIn=this._fadeIn.bind(this),this._fadeOut=this._fadeOut.bind(this),this._resumeCtx=this._resumeCtx.bind(this),this._init()}return Object(b.a)(t,[{key:"_init",value:function(){ft.Howler.autoUnlock=!1,ft.Howler.autoSuspend=!1,this.audioHowl=new ft.Howl({src:[ot.a.AUDIO_FILE],volume:0,loop:!1,autoplay:!1}),this.audioHowl.once("load",this._loaded)}},{key:"_loaded",value:function(){!0===ft.Howler.usingWebAudio&&ft.Howler.ctx&&ft.Howler.ctx.addEventListener("statechange",this._resumeCtx)}},{key:"_resumeCtx",value:function(){"undefined"!==typeof ft.Howler.ctx&&ft.Howler.ctx&&"suspended"===ft.Howler.ctx.state&&ft.Howler.ctx.resume()}},{key:"_play",value:function(){console.log("_play"),this.audio=this.audioHowl.play()}},{key:"_pause",value:function(){this.audio&&this.audioHowl.pause(this.audio)}},{key:"_fadeIn",value:function(){this.fadedIn||(this.fadedIn=!0,this.fadedOut=!1,this.audioHowl.off("fade"),this.audio=this.audioHowl.play(this.audio),this.audioHowl.fade(this.audioHowl._volume,1,2e3))}},{key:"_fadeOut",value:function(){var t=this;this.fadedOut||(this.fadedOut=!0,this.fadedIn=!1,this.audioHowl.off("fade"),this.audioHowl.once("fade",(function(e){t.audioHowl.pause(t.audio).volume(0)})),this.audioHowl.fade(this.audioHowl._volume,0,2e3))}}]),t}();function mt(){var t=Object(o.a)([""]);return mt=function(){return t},t}function vt(){var t=Object(o.a)([""]);return vt=function(){return t},t}function gt(){var t=Object(o.a)(["\n\twidth: ",";\n\theight: ",";\n\tmargin-right: ",";\n\n\tpath, circle {\n\t\tfill: ",";\n\t}\n"]);return gt=function(){return t},t}function bt(){var t=Object(o.a)(["\n\tfont-family: ",";\n\tfont-size: ",";\n\tcolor: ",";\n\tline-height: 1.8;\n\n\tpadding: 0 ",";\n\tmargin: 0;\n\tdisplay: none;\n"]);return bt=function(){return t},t}function yt(){var t=Object(o.a)(["\n\tdisplay: inline-flex;\n\talign-items: center;\n\tfont-size: ",";\n\tfont-weight: ",";\n\ttext-transform: uppercase;\n\n\tpadding: "," ",";\n\tmargin-top: ",";\n\tcursor: pointer;\n\n\tborder: 1px solid ",";\n\ttransition: border 250ms ease;\n\n\t&:hover {\n\t\tborder-color: ",";\n\t}\n"]);return yt=function(){return t},t}function xt(){var t=Object(o.a)(["\n\tposition: fixed;\n\tz-index: 99;\n\tbottom: 0;\n\tright: 0;\n\twidth: 50px;\n\theight: 50px;\n\n\t&:hover {\n\t\tbackground: grey;\n\t}\n"]);return xt=function(){return t},t}function wt(){var t=Object(o.a)(["\n\ttext-align: center;\n\tdisplay: none;\n"]);return wt=function(){return t},t}function kt(){var t=Object(o.a)(["\n\ttext-align: center;\n\tdisplay: none;\n"]);return kt=function(){return t},t}function Ot(){var t=Object(o.a)(["\n\tposition: absolute;\n\tz-index: 2;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n"]);return Ot=function(){return t},t}function _t(){var t=Object(o.a)(["\n\tposition: absolute;\n\tz-index: 100;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\n\tbackground: ",";\n\tvisibility: hidden;\n"]);return _t=function(){return t},t}function jt(){var t=Object(o.a)(["\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n"]);return jt=function(){return t},t}O.a.registerPlugin(_.a);var Et=c.c.div(jt()),Ct=c.c.div(_t(),T.light),Pt=c.c.div(Ot()),St=c.c.div(kt()),Rt=c.c.div(wt()),Tt=c.c.button(xt()),$t=c.c.button(yt(),Object(j.d)("12px"),R.medium,Object(j.a)("16px"),Object(j.a)("18px"),Object(j.a)("15px"),T.light,Object(j.b)(.1,T.light)),At=c.c.p(bt(),E.header,Object(j.d)(C.large),T.text,Object(j.d)("25px")),Mt=Object(c.c)(rt)(gt(),Object(j.a)("22px"),Object(j.a)("22px"),Object(j.a)("15px"),T.grey),It=c.c.canvas(vt()),Lt=(c.c.p(mt()),function(t){function e(t){var n;return Object(g.a)(this,e),(n=Object(y.a)(this,Object(x.a)(e).call(this,t))).state={sdkLoaded:!1,musicLoaded:!1,width:320,height:240,threshold:25,licenseName:"606-555-833-692-564-758-653-442-720-253-644.vlc",licenseURL:"lib/606-555-833-692-564-758-653-442-720-253-644.vlc",eyesClosedSession:"",eyesClosedCount:0},n.$preloader=a.a.createRef(),n.$canvas=a.a.createRef(),n.$status=a.a.createRef(),n.$loader=a.a.createRef(),n.$ready=a.a.createRef(),n.$closeYourEyes=a.a.createRef(),n.$completed=a.a.createRef(),n._loaded=n._loaded.bind(Object(w.a)(n)),n._songEnd=n._songEnd.bind(Object(w.a)(n)),n._initStream=n._initStream.bind(Object(w.a)(n)),n._canPlayStream=n._canPlayStream.bind(Object(w.a)(n)),n._tick=n._tick.bind(Object(w.a)(n)),n._introCompleted=n._introCompleted.bind(Object(w.a)(n)),window.callbackDownload=n._loaded,n}return Object(k.a)(e,t),Object(b.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.music=new pt;var e=this.music.audioHowl;e.once("load",(function(){t.setState({musicLoaded:!0})})),e.on("end",this._songEnd);this.visageModule=window.VisageModule({onRuntimeInitialized:this._loaded,locateFile:function(t){return"lib/"+t}});this.visageModule.preRun.push((function(){t.visageModule.FS_createPreloadedFile("/","FFT-High.cfg","lib/Facial Features Tracker - High.cfg",!0,!1),t.visageModule.FS_createPreloadedFile("/",t.state.licenseName,t.state.licenseURL,!0,!1,(function(){}),(function(){console.error("Loading License Failed!")}))}))}},{key:"_introCompleted",value:function(){O.a.fromTo(this.$ready.current,1,{display:"block",opacity:0,y:-20},{opacity:1,y:0,onComplete:function(){}})}},{key:"_songEnd",value:function(){var t=this;this.setState({eyesClosedCount:this.eyesClosedCount}),O.a.to(this.$closeYourEyes.current,.5,{opacity:0,display:"none",onComplete:function(){O.a.fromTo(t.$completed.current,1,{display:"block",opacity:0,y:-20},{delay:1,opacity:1,y:0,onComplete:function(){}})}})}},{key:"_readyToCloseEyes",value:function(){var t=this,e=this.$closeYourEyes.current,n=new _.a(e,{type:"words",wordsClass:"word word++"});this.closeEyesTimeline=O.a.timeline({onComplete:function(){t.block=!1}}).set(e,{display:"block"}).from(n.words,{duration:2,opacity:0,y:3,ease:"power2",stagger:.1},"words")}},{key:"_loaded",value:function(){var t=this;this.visageModule.initializeLicenseManager(this.state.licenseName),this.m_Tracker=new this.visageModule.VisageTracker("FFT-High.cfg"),this.faceDataArray=new this.visageModule.FaceDataVector,this.faceData=new this.visageModule.FaceData,this.faceDataArray.push_back(this.faceData),this.mWidth=this.$canvas.current.width,this.mHeight=this.$canvas.current.height,this.ppixels=this.visageModule._malloc(this.mWidth*this.mHeight*4),this.pixels=new Uint8ClampedArray(this.visageModule.HEAPU8.buffer,this.ppixels,this.mWidth*this.mHeight*4),this.canvasContext=this.$canvas.current.getContext("2d"),this.eyesClosed=!1,this.eyesClosedCounter=0,O.a.fromTo(this.$preloader.current,1.2,{visibility:"visible",y:"100%"},{delay:1,y:"0%",ease:"expo.inOut",onComplete:function(){O.a.set(t.$loader.current,{display:"none"}),O.a.to(t.$preloader.current,1.2,{y:"-100%",ease:"expo.inOut",onComplete:function(){t.setState({sdkLoaded:!0})}})}})}},{key:"_initStream",value:function(){var t=this;return v.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:this.music._fadeIn(),this.block=!0,O.a.to(this.$ready.current,.5,{opacity:0,y:20,onComplete:function(){var e;return v.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return O.a.set(t.$ready.current,{display:"none"}),t.$video=document.createElement("video"),n.prev=2,n.next=5,v.a.awrap(navigator.mediaDevices.getUserMedia({video:!0,audio:!1}));case 5:e=n.sent,t.$video.addEventListener("canplay",t._canPlayStream),t.$video.setAttribute("muted",!0),t.$video.setAttribute("playsinline",!0),t.$video.srcObject=e,t.$video.load(),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(2),t._errorStream(n.t0);case 16:case"end":return n.stop()}}),null,null,[[2,13]])}});case 3:case"end":return e.stop()}}),null,this)}},{key:"_errorStream",value:function(t){t&&console.error(t)}},{key:"_canPlayStream",value:function(t){this.startTracking=!0,this.draw=!0,this.eyesClosedCount=0,this.$video.removeEventListener("canplay",this._canPlayStream),this.$video.play(),this.$canvas.current.width=this.state.width,this.$canvas.current.height=this.state.height,this.mWidth=this.state.width,this.mHeight=this.state.height,this._tick(),this._readyToCloseEyes()}},{key:"_tick",value:function(){window.requestAnimationFrame(this._tick),this.canvasContext.drawImage(this.$video,0,0,this.mWidth,this.mHeight),this.imageData=this.canvasContext.getImageData(0,0,this.mWidth,this.mHeight).data;for(var t=0;t<this.imageData.length;t+=4)this.pixels[t]=this.imageData[t];if(this.trackerReturnState=this.m_Tracker.track(this.mWidth,this.mHeight,this.ppixels,this.faceDataArray,this.visageModule.VisageTrackerImageFormat.VISAGE_FRAMEGRABBER_FMT_RGBA.value,this.visageModule.VisageTrackerOrigin.VISAGE_FRAMEGRABBER_ORIGIN_TL.value),this.trackerReturnState[0]===this.visageModule.VisageTrackerStatus.TRACK_STAT_OK.value){var e=this.faceData.getEyeClosure();0===e[0]&&0===e[1]?this.eyesClosedCounter>this.state.threshold?(this.eyesClosed=!0,this.eyesClosedCount++):this.eyesClosedCounter++:(this.eyesClosedCounter=0,this.eyesClosed=!1)}else this.eyesClosedCounter=0,this.eyesClosed=!1;this.block||(this.eyesClosed?(this.closedForTheFirstTime=!0,this.music._fadeIn(),this.closeEyesTimeline.reverse()):(this.music._fadeOut(),this.closeEyesTimeline&&this.closedForTheFirstTime&&this.closeEyesTimeline.play()))}},{key:"render",value:function(){return a.a.createElement(Et,null,a.a.createElement(Ct,{ref:this.$preloader}),a.a.createElement(Pt,null,!this.state.sdkLoaded&&a.a.createElement(Q,{ref:this.$loader},"Loading experience..."),a.a.createElement(dt,{sdkLoaded:this.state.sdkLoaded,onComplete:this._introCompleted}),a.a.createElement(St,{ref:this.$ready},a.a.createElement(W,{rank:2,asRank:4},"Are you ready?"),a.a.createElement(H,null,"We need access to your webcam to be able to track if you close your eyes."),a.a.createElement($t,{onClick:this._initStream},a.a.createElement(Mt,null),"Give camera access")),a.a.createElement(Rt,{ref:this.$completed},a.a.createElement(W,{rank:2,asRank:4},"We hope you enjoyed ",ot.a.SONG_TITLE," by ",ot.a.ARTIST_NAME,"."),a.a.createElement(H,null,"You opened your eyes ",this.state.eyesClosedCount," times and your longest consecutive session was ",this.state.eyesClosedSession," ")),a.a.createElement(At,{ref:this.$closeYourEyes},a.a.createElement("strong",null,"Close your eyes")," to listen.")),a.a.createElement(It,{ref:this.$canvas,width:this.state.width,height:this.state.height}),a.a.createElement(Tt,{onClick:this._songEnd}))}}]),e}(i.PureComponent));function zt(){var t=Object(o.a)(["font-size: ",";"]);return zt=function(){return t},t}function Ht(){var t=Object(o.a)(["font-size: ",";"]);return Ht=function(){return t},t}function Dt(){var t=Object(o.a)(["font-size: ",";"]);return Dt=function(){return t},t}function Ft(){var t=Object(o.a)(["font-size: ",";"]);return Ft=function(){return t},t}function Nt(){var t=Object(o.a)(["\n\t*,\n\t*:before,\n\t*:after {\n\t box-sizing: inherit;\n\t outline: none;\n\t // -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n\t -webkit-font-smoothing: antialiased;\n\t}\n\n\t","\n\n\thtml {\n\t\tbox-sizing: border-box;\n\n\t\tfont-size: ",";\n\n\t\t","\n\t\t","\n\t\t","\n\t\t","\n\t}\n\n\tbody {\n\t\tfont-family: ",";\n\t\tfont-weight: ",";\n\t\tfont-style: normal;\n\t\tline-height: 1;\n\t\toverflow-x: hidden;\n\t}\n\n\tdiv {\n\t  white-space: pre-wrap;\n\t}\n\n\tarticle,\n\taside,\n\tdetails,\n\tfigcaption,\n\tfigure,\n\tfooter,\n\theader,\n\thgroup,\n\tmain,\n\tmenu,\n\tnav,\n\tsection,\n\tsummary {\n\t\tdisplay: block;\n\t}\n\n\ta {\n\t\ttext-decoration: none;\n\t}\n\n\tfigure {\n\t\tmargin: 0;\n\t}\n\n\tstrong {\n\t\tfont-weight: ",";\n\t}\n\n\tbutton {\n\t\tfont-family: inherit;\n\t\tfont-weight: inherit;\n\t\tline-height: 1;\n\n\t\tmargin: 0;\n\t\tpadding: 0;\n\n\t\tborder: 0;\n\t\tbackground: transparent;\n\t}\n\n\tfieldset {\n\t\tborder: 0;\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t}\n"]);return Nt=function(){return t},t}var Ut=Object(c.a)(Nt(),Object(j.c)(),C.small,I.small(Ft(),C.small),I.medium(Dt(),C.medium),I.large(Ht(),C.large),I.xlarge(zt(),C.xlarge),E.body,R.normal,R.bold);function Wt(){var t=Object(o.a)(["\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tpointer-events: none;\n\tz-index: 200;\n\tbackground: repeating-linear-gradient(90deg,#979797,#979797 1px,transparent 0,transparent 16.66667vw);\n\topacity: .06;\n"]);return Wt=function(){return t},t}var Gt=c.c.div(Wt()),Vt=Math.PI,Bt=Math.abs,Yt=(Math.sqrt,Math.pow,Math.random),Kt=Math.atan2,qt=.5*Vt,Xt=function(t){return t*Yt()},Jt=function(t,e,n,i){return Kt(i-e,n-t)},Qt=function(t,e,n){return(1-n)*t+n*e},Zt=n(9),te=n(25),ee=n(26),ne=n.n(ee),ie=n(27),ae=n.n(ie),re=function(){function t(e){var n=this;Object(g.a)(this,t),this.scene=new Zt.e,this.vertex="varying vec2 vUv;void main() {vUv = uv;gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );}",this.fragment=e.fragment,this.uniforms=e.uniforms,this.renderer=new Zt.i,this.width=window.innerWidth,this.height=window.innerHeight,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(15658734,1),this.duration=e.duration||1,this.debug=e.debug||!1,this.easing=e.easing||"easeInOut",this.clicker=document,this.container=e.el,this.bgCanvas=e.bgCanvas;var i=window,a=i.innerWidth,r=i.innerHeight;this.images=[ne.a,ae.a],this.width=a,this.height=r,this.container.appendChild(this.renderer.domElement),this.camera=new Zt.c(70,window.innerWidth/window.innerHeight,.001,1e3),this.camera.position.set(0,0,2),this.time=0,this.current=0,this.textures=[],this.next=this.next.bind(this),this.paused=!0,this.initiate((function(){console.log(n.textures),n.setupResize(),n.settings(),n.addObjects(),n.resize(),n.clickEvent(),n.play()}))}return Object(b.a)(t,[{key:"initiate",value:function(t){var e=this,n=[],i=this;this.images.forEach((function(t,e){var a=new Promise((function(n){i.textures[e]=(new Zt.g).load(t,n)}));n.push(a)})),Promise.all(n).then((function(){console.log("this.bgCanvas",e.bgCanvas),i.textures[0]=(new Zt.g).load(e.bgCanvas.b.toDataURL()),t()}))}},{key:"clickEvent",value:function(){}},{key:"settings",value:function(){var t=this;this.debug&&(this.gui=new te.a),this.settings={progress:.5},Object.keys(this.uniforms).forEach((function(e){t.settings[e]=t.uniforms[e].value,t.debug&&t.gui.add(t.settings,e,t.uniforms[e].min,t.uniforms[e].max,.01)}))}},{key:"setupResize",value:function(){window.addEventListener("resize",this.resize.bind(this))}},{key:"resize",value:function(){var t,e,n=window,i=n.innerWidth,a=n.innerHeight;this.width=i,this.height=a,this.renderer.setSize(this.width,this.height),this.camera.aspect=this.width/this.height,this.imageAspect=a/i,this.height/this.width>this.imageAspect?(t=this.width/this.height*this.imageAspect,e=1):(t=1,e=this.height/this.width/this.imageAspect),this.material.uniforms.resolution.value.x=this.width,this.material.uniforms.resolution.value.y=this.height,this.material.uniforms.resolution.value.z=t,this.material.uniforms.resolution.value.w=e;var r=this.camera.position.z;this.camera.fov=180/Math.PI*2*Math.atan(1/(2*r)),this.plane.scale.x=this.camera.aspect,this.plane.scale.y=1,this.camera.updateProjectionMatrix()}},{key:"addObjects",value:function(){this.material=new Zt.f({extensions:{derivatives:"#extension GL_OES_standard_derivatives : enable"},side:Zt.a,uniforms:{time:{type:"f",value:0},progress:{type:"f",value:0},border:{type:"f",value:0},intensity:{type:"f",value:0},scaleX:{type:"f",value:40},scaleY:{type:"f",value:40},transition:{type:"f",value:40},swipe:{type:"f",value:0},width:{type:"f",value:0},radius:{type:"f",value:0},texture1:{type:"f",value:this.textures[0]},texture2:{type:"f",value:this.textures[1]},displacement:{type:"f",value:(new Zt.g).load("img/disp1.jpg")},resolution:{type:"v4",value:new Zt.h}},vertexShader:this.vertex,fragmentShader:this.fragment}),this.geometry=new Zt.d(1,1,2,2),this.plane=new Zt.b(this.geometry,this.material),this.scene.add(this.plane)}},{key:"stop",value:function(){this.paused=!0}},{key:"play",value:function(){this.paused=!1,this.render()}},{key:"next",value:function(){var t=this;if(!this.isRunning){this.isRunning=!0;var e=this.textures.length,n=this.textures[(this.current+1)%e];this.material.uniforms.texture2.value=n,O.a.timeline().to(this.material.uniforms.progress,this.duration,{value:1,ease:"power2.inOut",onComplete:function(){console.log("FINISH"),t.current=(t.current+1)%e,t.material.uniforms.texture1.value=n,t.material.uniforms.progress.value=0,t.isRunning=!1}})}}},{key:"render",value:function(){var t=this;this.paused||(this.time+=.05,this.material.uniforms.time.value=this.time,Object.keys(this.uniforms).forEach((function(e){t.material.uniforms[e].value=t.settings[e]})),window.requestAnimationFrame(this.render.bind(this)),this.renderer.render(this.scene,this.camera))}}]),t}();function se(){var t=Object(o.a)(["\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\n\tcanvas {\n\t\tposition: absolute;\n\t\tz-index: 99;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n"]);return se=function(){return t},t}function oe(){var t=Object(o.a)(["\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n"]);return oe=function(){return t},t}var ce=Math.cos,ue=Math.sin,le=c.c.canvas(oe()),he=c.c.div(se()),de=function(t){function e(t){var n;return Object(g.a)(this,e),(n=Object(y.a)(this,Object(x.a)(e).call(this,t))).state={particleCount:700,particlePropCount:9,particlePropsLength:6300,baseTTL:100,rangeTTL:500,baseSpeed:.1,rangeSpeed:1,baseSize:2,rangeSize:10,baseHue:0,rangeHue:1,noiseSteps:2,xOff:.0025,yOff:.005,zOff:5e-4,backgroundColor:"rgb(255, 255, 255)",hue:225},n.$canvasB=a.a.createRef(),n.$status=a.a.createRef(),n.$background=a.a.createRef(),n._next=n._next.bind(Object(w.a)(n)),n._draw=n._draw.bind(Object(w.a)(n)),n._play=n._play.bind(Object(w.a)(n)),n._pause=n._pause.bind(Object(w.a)(n)),n._mouseMove=n._mouseMove.bind(Object(w.a)(n)),n}return Object(k.a)(e,t),Object(b.a)(e,[{key:"componentDidMount",value:function(){window.addEventListener("mousemove",this._mouseMove,!1);var t=ft.Howler._howls[0];console.log("_howls",ft.Howler._howls,t),t.on("play",this._play),t.on("pause",this._pause),this._createCanvas(),this._resize(),this._initParticles(),this._draw()}},{key:"_webgl",value:function(){this.sketch=new re({el:this.$background.current,bgCanvas:this.canvas,duration:1,debug:!0,uniforms:{radius:{value:.9,type:"f",min:.1,max:2},width:{value:.35,type:"f",min:0,max:1}},fragment:"\n\t\t\t\tuniform float progress;\n\t\t\t\tuniform float width;\n\t\t\t\tuniform float transition;\n\t\t\t\tuniform float radius;\n\t\t\t\tuniform sampler2D texture1;\n\t\t\t\tuniform sampler2D texture2;\n\t\t\t\tuniform vec4 resolution;\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tfloat parabola( float x, float k ) {\n\t\t\t\t\treturn pow( 4. * x * ( 1. - x ), k );\n\t\t\t\t}\n\t\t\t\tvoid main()\t{\n\t\t\t\tvec2 newUV = (vUv - vec2(0.5))*resolution.zw + vec2(0.5);\n\t\t\t\tvec2 p = newUV;\n\t\t\t\tvec2 start = vec2(0.5,0.5);\n\t\t\t\tvec2 aspect = resolution.wz;\n\t\t\t\tvec2 uv = newUV;\n\t\t\t\tfloat dt = parabola(progress, 1.);\n\t\t\t\tfloat prog = progress*0.66;\n\t\t\t\tfloat circ = 1. - smoothstep(-width, 0.0, radius * distance(start*aspect, uv*aspect) - prog*(1.+width));\n\t\t\t\tfloat intpl = pow(abs(circ), 1.);\n\t\t\t\tvec4 t1 = texture2D( texture1, (uv - 0.5) * (1.0 - intpl) + 0.5 ) ;\n\t\t\t\tvec4 t2 = texture2D( texture2, (uv - 0.5) * intpl + 0.5 );\n\t\t\t\tgl_FragColor = mix( t1, t2, intpl );\n\t\t\t}\n\t\t\t"}),console.log({sketch:this.sketch})}},{key:"_createCanvas",value:function(){this.canvas={a:document.createElement("canvas"),b:this.$canvasB.current},this.ctx={a:this.canvas.a.getContext("2d"),b:this.canvas.b.getContext("2d")},this.center=[]}},{key:"_initParticles",value:function(){var t;for(this.particleProps=new Float32Array(this.state.particlePropsLength),t=0;t<this.state.particlePropsLength;t+=this.state.particlePropCount)this._initParticle(t)}},{key:"_initParticle",value:function(t){var e,n,i,a,r,s,o,c,u;n=Xt(this.canvas.a.width),i=Xt(this.canvas.a.height),e=Jt(n,i,this.center[0],this.center[1]),a=6*ce(e),r=6*ue(e),s=this.state.baseTTL+Xt(this.state.rangeTTL),o=this.state.baseSpeed+Xt(this.state.rangeSpeed),c=this.state.baseSize+Xt(this.state.rangeSize),u=this.state.baseHue+Xt(this.state.rangeHue),this.particleProps.set([n,i,a,r,0,s,o,c,u],t)}},{key:"_drawParticles",value:function(){var t;for(t=0;t<this.state.particlePropsLength;t+=this.state.particlePropCount)this._updateParticle(t)}},{key:"_updateParticle",value:function(t){var e,n,i,a,r,s,o,c,u,l,h,d,f=1+t,p=2+t,m=3+t,v=4+t,g=5+t,b=6+t,y=7+t,x=8+t;e=this.particleProps[t],n=this.particleProps[f],i=Jt(e,n,this.center[0],this.center[1])+.75*qt,a=Qt(this.particleProps[p],2*ce(i),.05),r=Qt(this.particleProps[m],2*ue(i),.05),s=this.particleProps[v],o=this.particleProps[g],u=e+a*(c=this.particleProps[b]),l=n+r*c,h=this.particleProps[y],d=this.particleProps[x],this._drawParticle(e,n,i,s,o,h,d),s++,this.particleProps[t]=u,this.particleProps[f]=l,this.particleProps[p]=a,this.particleProps[m]=r,this.particleProps[v]=s,s>o&&this._initParticle(t)}},{key:"_drawParticle",value:function(t,e,n,i,a,r,s){var o=t-.5*r,c=e-.5*r;this.ctx.a.save(),this.ctx.a.lineCap="round",this.ctx.a.lineWidth=1,this.ctx.a.strokeStyle="rgba(".concat(this.hue||this.state.hue,", 225, 225, ").concat(function(t,e){var n=.5*e;return Bt((t+n)%e-n)/n}(i,a),")"),this.ctx.a.beginPath(),this.ctx.a.translate(o,c),this.ctx.a.rotate(n),this.ctx.a.translate(-o,-c),this.ctx.a.strokeRect(o,c,r,r),this.ctx.a.closePath(),this.ctx.a.restore()}},{key:"_renderGlow",value:function(){this.ctx.b.save(),this.ctx.b.filter="blur(8px) brightness(300%)",this.ctx.b.globalCompositeOperation="darken",this.ctx.b.drawImage(this.canvas.a,0,0),this.ctx.b.restore(),this.ctx.b.save(),this.ctx.b.filter="blur(4px) brightness(300%)",this.ctx.b.globalCompositeOperation="darken",this.ctx.b.drawImage(this.canvas.a,0,0),this.ctx.b.restore()}},{key:"_render",value:function(){this.ctx.b.save(),this.ctx.b.globalCompositeOperation="darken",this.ctx.b.drawImage(this.canvas.a,0,0),this.ctx.b.restore()}},{key:"_draw",value:function(){this.tick++,this.ctx.a.clearRect(0,0,this.canvas.a.width,this.canvas.a.height),this.ctx.b.fillStyle=this.state.backgroundColor,this.ctx.b.fillRect(0,0,this.canvas.a.width,this.canvas.a.height),this._drawParticles(),this._renderGlow(),this._render(),window.requestAnimationFrame(this._draw)}},{key:"_mouseMove",value:function(t){this.center=[t.pageX,t.pageY]}},{key:"_play",value:function(){}},{key:"_pause",value:function(){}},{key:"_next",value:function(){var t=this;console.log("_next"),this.sketch.isRunning=!0;var e=this.sketch.textures.length,n=this.sketch.textures[(this.sketch.current+1)%e];this.sketch.material.uniforms.texture2.value=n,O.a.timeline().to(this.sketch.material.uniforms.progress,this.sketch.duration,{value:1,ease:"power2.inOut",onComplete:function(){t.sketch.current=(t.sketch.current+1)%e,t.sketch.material.uniforms.texture1.value=n,t.sketch.material.uniforms.progress.value=0,t.sketch.isRunning=!1}})}},{key:"_resize",value:function(){var t=window,e=t.innerWidth,n=t.innerHeight;this.canvas.a.width=e,this.canvas.a.height=n,this.ctx.a.drawImage(this.canvas.b,0,0),this.canvas.b.width=e,this.canvas.b.height=n,this.ctx.b.drawImage(this.canvas.a,0,0)}},{key:"render",value:function(){return a.a.createElement(he,{ref:this.$background},a.a.createElement(le,{ref:this.$canvasB,width:this.state.width,height:this.state.height}))}}]),e}(i.PureComponent);function fe(){var t=Object(o.a)([""]);return fe=function(){return t},t}c.c.button(fe());var pe=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ut,null),a.a.createElement(p,null,a.a.createElement(Lt,null),a.a.createElement(de,null),a.a.createElement(Gt,null)))};s.a.render(a.a.createElement(pe,null),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.a84c98ec.chunk.js.map