(this["webpackJsonpclose-your-eyes"]=this["webpackJsonpclose-your-eyes"]||[]).push([[0],{18:function(e,t,a){e.exports=a(26)},26:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(8),s=a.n(r),c=a(1),o=a(2);function u(){var e=Object(c.a)(["\n font-size: large;\n"]);return u=function(){return e},e}function h(){var e=Object(c.a)(["\n animation: App-logo-spin infinite 20s linear;\n height: 80px;\n @keyframes App-logo-spin {\n   from { transform: rotate(0deg); }\n   to { transform: rotate(360deg); }\n }\n"]);return h=function(){return e},e}function l(){var e=Object(c.a)(["\n   font-size: 1.5em;\n"]);return l=function(){return e},e}function d(){var e=Object(c.a)(["\n background-color: #222;\n height: 150px;\n padding: 20px;\n color: white;\n"]);return d=function(){return e},e}function v(){var e=Object(c.a)(["\n text-align: center;\n"]);return v=function(){return e},e}var f=o.b.div(v()),m=(o.b.header(d()),o.b.h1(l()),o.b.img(h()),o.b.p(u()),a(6)),g=a.n(m),b=a(12),p=a(13),y=a(16),k=a(14),w=a(3),_=a(17);function F(){var e=Object(c.a)([""]);return F=function(){return e},e}function j(){var e=Object(c.a)([""]);return j=function(){return e},e}function O(){var e=Object(c.a)([""]);return O=function(){return e},e}var $=o.b.button(O()),S=o.b.canvas(j()),M=o.b.div(F()),x=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(y.a)(this,Object(k.a)(t).call(this,e))).state={sdkLoaded:!1,width:320,height:240,threshold:15,licenseName:"606-555-833-692-564-758-653-442-720-253-644.vlc",licenseURL:"lib/606-555-833-692-564-758-653-442-720-253-644.vlc"},a.$canvas=i.a.createRef(),a.$status=i.a.createRef(),a._loaded=a._loaded.bind(Object(w.a)(a)),a._initStream=a._initStream.bind(Object(w.a)(a)),a._canPlayStream=a._canPlayStream.bind(Object(w.a)(a)),a._tick=a._tick.bind(Object(w.a)(a)),window.callbackDownload=a._loaded,a}return Object(_.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.visageModule=window.VisageModule({onRuntimeInitialized:this._loaded,locateFile:function(e){return"lib/"+e}});this.visageModule.preRun.push((function(){e.visageModule.FS_createPreloadedFile("/","FFT-High.cfg","lib/Facial Features Tracker - High.cfg",!0,!1),e.visageModule.FS_createPreloadedFile("/","FFT-Low.cfg","lib/Facial Features Tracker - Low.cfg",!0,!1),e.visageModule.FS_createPreloadedFile("/",e.state.licenseName,e.state.licenseURL,!0,!1,(function(){}),(function(){console.error("Loading License Failed!")}))}))}},{key:"_loaded",value:function(){this.visageModule.initializeLicenseManager(this.state.licenseName),this.m_Tracker=new this.visageModule.VisageTracker("FFT-Low.cfg"),this.faceDataArray=new this.visageModule.FaceDataVector,this.faceData=new this.visageModule.FaceData,this.faceDataArray.push_back(this.faceData),this.mWidth=this.$canvas.current.width,this.mHeight=this.$canvas.current.height,this.ppixels=this.visageModule._malloc(this.mWidth*this.mHeight*4),this.pixels=new Uint8ClampedArray(this.visageModule.HEAPU8.buffer,this.ppixels,this.mWidth*this.mHeight*4),this.canvasContext=this.$canvas.current.getContext("2d"),this.eyesClosed=!1,this.eyesClosedCounter=0,this.setState({sdkLoaded:!0})}},{key:"_initStream",value:function(){var e;return g.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=null,this.$video=document.createElement("video"),t.prev=2,t.next=5,g.a.awrap(navigator.mediaDevices.getUserMedia({video:!0,audio:!1}));case 5:e=t.sent,this.$video.addEventListener("canplay",this._canPlayStream),this.$video.loop=this.$video.muted=this.$video.autoplay=this.$video.playsinline=!0,this.$video.srcObject=e,this.$video.load(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),this._errorStream(t.t0);case 15:case"end":return t.stop()}}),null,this,[[2,12]])}},{key:"_errorStream",value:function(e){e&&console.error(e)}},{key:"_canPlayStream",value:function(e){this.startTracking=!0,this.draw=!0,this.$video.removeEventListener("canplay",this._canPlayStream),this.$video.play(),this.$canvas.current.width=this.state.width,this.$canvas.current.height=this.state.height,this.mWidth=this.state.width,this.mHeight=this.state.height,this._tick()}},{key:"_tick",value:function(){window.requestAnimationFrame(this._tick),this.canvasContext.drawImage(this.$video,0,0,this.mWidth,this.mHeight)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(M,{ref:this.$status}),this.state.sdkLoaded&&i.a.createElement($,{onClick:this._initStream},"Start"),i.a.createElement(S,{ref:this.$canvas,width:this.state.width,height:this.state.height}))}}]),t}(i.a.Component);function E(){var e=Object(c.a)([""]);return E=function(){return e},e}function L(){var e=Object(c.a)(["\n\tbody {\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t\tfont-family: sans-serif;\n\t}\n"]);return L=function(){return e},e}var C=Object(o.a)(L());o.b.button(E());var D=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(C,null),i.a.createElement(f,null,i.a.createElement(x,null)))};s.a.render(i.a.createElement(D,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.322c40ee.chunk.js.map