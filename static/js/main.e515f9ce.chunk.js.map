{"version":3,"sources":["styles.js","Tracker.js","App.js","index.js"],"names":["AppContainer","styled","div","header","h1","img","p","Button","button","Canvas","canvas","Tracker","props","state","sdkLoaded","width","height","licenseName","licenseURL","$canvas","React","createRef","_loaded","bind","_initStream","_canPlayStream","_tick","window","callbackDownload","this","visageModule","VisageModule","onRuntimeInitialized","locateFile","dataFileName","preRun","push","FS_createPreloadedFile","console","error","initializeLicenseManager","m_Tracker","VisageTracker","setState","stream","$video","document","createElement","navigator","mediaDevices","getUserMedia","video","audio","addEventListener","loop","muted","autoplay","srcObject","load","_errorStream","startTracking","draw","removeEventListener","play","current","mWidth","mHeight","requestAnimationFrame","Fragment","onClick","ref","Component","GlobalStyle","createGlobalStyle","App","ReactDOM","render","getElementById"],"mappings":"k3BAEO,IAAMA,EAAeC,IAAOC,IAAV,K,GAIAD,IAAOE,OAAV,KAOEF,IAAOG,GAAV,KAIEH,IAAOI,IAAV,KASIJ,IAAOK,EAAV,K,wMCvBrB,IAAMC,EAASN,IAAOO,OAAV,KACNC,EAASR,IAAOS,OAAV,KA4GGC,E,YAzGd,WAAaC,GAAQ,IAAD,8BACnB,4CAAMA,KAEDC,MAAQ,CACZC,WAAW,EACXC,MAAO,IACPC,OAAQ,IACRC,YAAa,kDACbC,WAAY,uDAGb,EAAKC,QAAUC,IAAMC,YAErB,EAAKC,QAAU,EAAKA,QAAQC,KAAb,gBACf,EAAKC,YAAc,EAAKA,YAAYD,KAAjB,gBACnB,EAAKE,eAAiB,EAAKA,eAAeF,KAApB,gBACtB,EAAKG,MAAQ,EAAKA,MAAMH,KAAX,gBAEbI,OAAOC,iBAAmB,EAAKN,QAlBZ,E,iFAqBE,IAAD,OAMpBO,KAAKC,aAAeH,OAAOI,aAAa,CACvCC,qBAAsBH,KAAKP,QAC3BW,WAPgB,SAAUC,GAE1B,MADmB,OAASA,KAc7BL,KAAKC,aAAaK,OAAOC,MALN,WAClB,EAAKN,aAAaO,uBAAuB,IAAK,qCAAsC,0CAA0C,GAAM,GACpI,EAAKP,aAAaO,uBAAuB,IAAK,EAAKxB,MAAMI,YAAa,EAAKJ,MAAMK,YAAY,GAAM,GAAO,eAAgB,WAAcoB,QAAQC,MAAM,mC,gCAQvJV,KAAKC,aAAaU,yBAAyBX,KAAKhB,MAAMI,aAEtDY,KAAKY,UAAY,IAAIZ,KAAKC,aAAaY,cAAc,sCAErDb,KAAKc,SAAS,CAAE7B,WAAW,M,mHAIvB8B,EAAS,KACbf,KAAKgB,OAASC,SAASC,cAAc,S,4BAGrBC,UAAUC,aAAaC,aAAa,CAClDC,OAAO,EACPC,OAAO,K,OAFRR,E,OAKAf,KAAKgB,OAAOQ,iBAAiB,UAAWxB,KAAKJ,gBAC7CI,KAAKgB,OAAOS,KAAOzB,KAAKgB,OAAOU,MAAQ1B,KAAKgB,OAAOW,UAAW,EAC9D3B,KAAKgB,OAAOY,UAAYb,EACxBf,KAAKgB,OAAOa,O,kDAEZ7B,KAAK8B,aAAL,M,8FAIYpB,GACTA,GAAOD,QAAQC,MAAMA,K,qCAGVK,GACff,KAAK+B,eAAgB,EACrB/B,KAAKgC,MAAO,EAEZhC,KAAKgB,OAAOiB,oBAAoB,UAAWjC,KAAKJ,gBAEhDI,KAAKgB,OAAOkB,OAEZlC,KAAKV,QAAQ6C,QAAQjD,MAAQc,KAAKhB,MAAME,MACxCc,KAAKV,QAAQ6C,QAAQhD,OAASa,KAAKhB,MAAMG,OAEzCa,KAAKoC,OAASpC,KAAKhB,MAAME,MACzBc,KAAKqC,QAAUrC,KAAKhB,MAAMG,OAE1Ba,KAAKH,U,8BAILC,OAAOwC,sBAAsBtC,KAAKH,S,+BAMlC,OACC,kBAAC,IAAM0C,SAAP,KACEvC,KAAKhB,MAAMC,WAAa,kBAACP,EAAD,CAAQ8D,QAASxC,KAAKL,aAAtB,SACzB,kBAACf,EAAD,CAAQ6D,IAAKzC,KAAKV,QAASJ,MAAOc,KAAKhB,MAAME,MAAOC,OAAQa,KAAKhB,MAAMG,c,GApGrDI,IAAMmD,W,0NCC5B,IAAMC,EAAcC,YAAH,KAQKxE,IAAOO,OAAV,KAaJkE,MAXf,WACC,OACC,kBAAC,IAAMN,SAAP,KACC,kBAACI,EAAD,MACA,kBAACxE,EAAD,KACC,kBAAC,EAAD,SClBJ2E,IAASC,OAAO,kBAAC,EAAD,MAAS9B,SAAS+B,eAAe,W","file":"static/js/main.e515f9ce.chunk.js","sourcesContent":["import styled from 'styled-components';\n\nexport const AppContainer = styled.div`\n text-align: center;\n`;\n\nexport const AppHeader = styled.header`\n background-color: #222;\n height: 150px;\n padding: 20px;\n color: white;\n`;\n\nexport const AppTitle = styled.h1`\n   font-size: 1.5em;\n`;\n\nexport const AppLogo = styled.img`\n animation: App-logo-spin infinite 20s linear;\n height: 80px;\n @keyframes App-logo-spin {\n   from { transform: rotate(0deg); }\n   to { transform: rotate(360deg); }\n }\n`;\n\nexport const AppIntro = styled.p`\n font-size: large;\n`;\n","import React from 'react';\nimport styled from 'styled-components';\n\nconst Button = styled.button``;\nconst Canvas = styled.canvas``;\n\nclass Tracker extends React.Component {\n\tconstructor (props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tsdkLoaded: false,\n\t\t\twidth: 320,\n\t\t\theight: 240,\n\t\t\tlicenseName: '251-700-611-878-240-511-438-067-770-738-460.vlc',\n\t\t\tlicenseURL: 'lib/251-700-611-878-240-511-438-067-770-738-460.vlc'\n\t\t};\n\n\t\tthis.$canvas = React.createRef();\n\n\t\tthis._loaded = this._loaded.bind(this);\n\t\tthis._initStream = this._initStream.bind(this);\n\t\tthis._canPlayStream = this._canPlayStream.bind(this);\n\t\tthis._tick = this._tick.bind(this);\n\n\t\twindow.callbackDownload = this._loaded;\n\t}\n\n\tcomponentDidMount () {\n\t\tvar locateFile = function (dataFileName) {\n\t\t\tvar relativePath = 'lib/' + dataFileName;\n\t\t\treturn relativePath;\n\t\t};\n\n\t\tthis.visageModule = window.VisageModule({\n\t\t\tonRuntimeInitialized: this._loaded,\n\t\t\tlocateFile: locateFile\n\t\t});\n\n\t\tvar preloadFiles = () => {\n\t\t\tthis.visageModule.FS_createPreloadedFile('/', 'Facial Features Tracker - High.cfg', 'lib/Facial Features Tracker - High.cfg', true, false);\n\t\t\tthis.visageModule.FS_createPreloadedFile('/', this.state.licenseName, this.state.licenseURL, true, false, function () {}, function () { console.error('Loading License Failed!'); });\n\t\t};\n\n\t\tthis.visageModule.preRun.push(preloadFiles);\n\t}\n\n\t_loaded () {\n\t\t// license\n\t\tthis.visageModule.initializeLicenseManager(this.state.licenseName);\n\n\t\tthis.m_Tracker = new this.visageModule.VisageTracker('Facial Features Tracker - High.cfg');\n\n\t\tthis.setState({ sdkLoaded: true });\n\t}\n\n\tasync _initStream () {\n\t\tlet stream = null;\n\t\tthis.$video = document.createElement('video');\n\n\t\ttry {\n\t\t\tstream = await navigator.mediaDevices.getUserMedia({\n\t\t\t\tvideo: true,\n\t\t\t\taudio: false\n\t\t\t});\n\n\t\t\tthis.$video.addEventListener('canplay', this._canPlayStream);\n\t\t\tthis.$video.loop = this.$video.muted = this.$video.autoplay = true;\n\t\t\tthis.$video.srcObject = stream;\n\t\t\tthis.$video.load();\n\t\t} catch (error) {\n\t\t\tthis._errorStream(error);\n\t\t}\n\t}\n\n\t_errorStream (error) {\n\t\tif (error) console.error(error);\n\t}\n\n\t_canPlayStream (stream) {\n\t\tthis.startTracking = true;\n\t\tthis.draw = true;\n\n\t\tthis.$video.removeEventListener('canplay', this._canPlayStream);\n\n\t\tthis.$video.play();\n\n\t\tthis.$canvas.current.width = this.state.width;\n\t\tthis.$canvas.current.height = this.state.height;\n\n\t\tthis.mWidth = this.state.width;\n\t\tthis.mHeight = this.state.height;\n\n\t\tthis._tick();\n\t}\n\n\t_tick () {\n\t\twindow.requestAnimationFrame(this._tick);\n\n\t\t// here we should do something with the tracker\n\t}\n\n\trender () {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t{this.state.sdkLoaded && <Button onClick={this._initStream}>Start</Button>}\n\t\t\t\t<Canvas ref={this.$canvas} width={this.state.width} height={this.state.height} />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\nexport default Tracker;\n","import React from 'react';\nimport styled, { createGlobalStyle } from 'styled-components';\n// import logo from './logo.svg';\nimport { AppContainer } from './styles'; // , AppHeader, AppTitle, AppLogo, AppIntro\nimport Tracker from './Tracker';\n\n// Add global styles\nconst GlobalStyle = createGlobalStyle`\n\tbody {\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t\tfont-family: sans-serif;\n\t}\n`;\n\nexport const Button = styled.button``;\n\nfunction App () {\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<GlobalStyle />\n\t\t\t<AppContainer>\n\t\t\t\t<Tracker />\n\t\t\t</AppContainer>\n\t\t</React.Fragment>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}